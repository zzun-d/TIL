## 스레드의 정의

**프로세스의 작업 과정**
1. 코드+데이터를 메모리에 가져옴
2. 프로세스 제어 블록 생성
3. 작업에 필요한 메모리 영역 확보
4. 준비된 프로세스를 준비된 큐에 삽입
5. 프로세스 생성시 CPU 스케쥴러가 해야할 일을 CPU에 전달
    
    전달되는 것 하나가 스레드
    
    → 프로세스의 코드에 따라 CPU에 작업 요청하는 실행 단위
    
    **프로세스 내에서 실행되는 흐름의 단위**
    
    프로세스 하나에 자원을 공유하면서 일련의 과정을 여러 개 동시에 실행시킬 수 있는 것
        
2. 프로세스와 스레드의 차이
    
    **프로세스와 스레드의 다른점**
    
    프로세스 = 하나의 목표 // 스레드는 목표를 달성하기 위한 작업
    
    프로세스끼리는 약하게 연결 ⇒ 왜, 와이 : 서로 다른 작업일 수도 있기 때문
    
    스레드끼리는 강하게 연결 ⇒ 하나의 프로세스를 위한 밑작업
    
3. 스레드 관련 용어
    
    멀티스레드, 멀티태스킹, 멀티프로세싱, CPU멀티스레드
    
    1. 멀티스레드 - 프로세스 내 작업을 여러 개의 스레드로 분할, OS가 주체, SW적
    2. 멀티태스킹 - 시분할 시스템을 활용한 기법, CPU에게 OS가 명령을 내리는거
    3. 멀티프로세싱 - CPU, 코어, 컴퓨터를 여러 개 사용하여 여러 개의 스레드를 동시에 처리
        
        → 슈퍼스칼리 기법 : 코어를 여러개 사용하여 병렬처리
        
    4. CPU멀티스레드 - 파이프라인 기법 사용, CPU가 주체, HW적
    

멀티태스킹이 하나의 운영 체제 안에서 여러 프로세스가 실행되는 것

멀티스레드는 하나의 프로세스가 여러 작업을 여러 스레드를 사용하여 동시에 처리하는 것을 의미

> ★ 프로그램 → 프로세스 → 스레드

프로그램 : 코드랑 데이터

프로세스 : 프로그램이  실행되어 메모리에 올라가있는 동적인 상태

스레드 : 프로그램에게 할당된 프로세스는 한정되어있기 때문에 더 작은 단위로 작업을 처리하기 위한 단위

파이썬에서 스레드는 비동기 프로그래밍에서 쓰임

**asyncio 모듈**

## 멀티스레드

### 1. 멀티스레드의 구조
    
스레드의 생성과 구성

C언어 이야기 - fork를 통해 스레드를 만들 경우, 코드, 프로세스 제어 블록, 공유변수가 중복됨

프로세스 -  정적인 영역 / 동적인 영역

1. 정적인 영역 : 프로세스가 실행되는 동안 바뀌지 않는 영역
2. 동적인 영역 : 스레드가 작업을 하면서 값이 바뀌거나 생성,소멸되는 영역 = 레지스터,스택,힙

### 2. 멀티스레드의 장단점

1. 장점
    1. 응답성 향상 : 다른 스레드가 작업 중이어도 다른 스레드가 작업할 수 있음
    2. 자원공유 : 한 프로세스 내의 자원을 같은 프로세스 내의 모든 스레드가 공유하여 작업 원할
    3. 효율성 향상 : fork와는 달리 자원의 중복을 막음
    4. 다중 CPU 지원 : 다중 CPU가 멀티스레드를 동시에 처리하여 시간 단축
2. 단점
    1. IE는 프로세스에 멀티스레드를 활용해 창을 염 → 하나가 문제생기면 다 닫아야함

### 3. 멀티스레드 모델

커널스레드, 사용자스레드 ⇒ 라이브러리를 활용 가능

1. 사용자 스레드 - 라이브러리 사용함! 커널 입장에선 하나의 프로세스처럼 보임
    
    커널이 하는 일을 라이브러리가 대신 처리
    
    하나의 커널 스레드와 여러개의 스레드가 연결되기에 1 to N 모델
    
    장점! 라이브러리가 스케쥴링하고 정보를 처리해서 문맥 교환이 필요 없음
    
    단점! 1 to N 모델이기에 커널스레드가 대기상태로 들어가면 사용자 스레드 전체가 대기
    
         커널이 사용자 스레드를 하나의 프로세스로 인식하기에 나눌 수 없음
    
         보안에 취약
    
2. 커널 스레드 - 커널이 멀티스레드를 지원, 1 to 1모델
    
    독립적 스케쥴링 가능! ← 특정 스레드가 대기상태가 되어도 다른 스레드는 작업 가능
    
    사용자 스레드와 정 반대
    
3. 멀티레벨 스레드
    
    사용자 + 커널 스레드 혼합. M to N 모델